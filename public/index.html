<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="icon" href="<%= BASE_URL %>favicon.ico" />
    <title>总体态势</title>
  </head>

  <body>
    <noscript>
      <strong
        >We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please
        enable it to continue.</strong
      >
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
  <script>
    /** 支持缩放功能   **/
    //监听浏览器窗口改变大小
    var winWidth = 1920
    var winHeight = 1080
    window.addEventListener("resize", () => {
      // resetScale()
    })
    // resetScale()

    function getSize() {
      //获得窗口大小
      if (window.innerWidth) winWidth = window.innerWidth
      else if (document.body && document.body.clientWidth) winWidth = document.body.clientWidth
      //获取窗口高度
      if (window.innerHeight) winHeight = window.innerHeight
      else if (document.body && document.body.clientHeight) winHeight = document.body.clientHeight

      //通过深入Document内部对body进行检测，获取窗口大小
      if (document.documentElement && document.documentElement.clientHeight && document.documentElement.clientWidth) {
        winHeight = document.documentElement.clientHeight
        winWidth = document.documentElement.clientWidth
      }
    }

    function resetScale() {
      //调整缩放
      getSize()
      var db = document.body
      // var dbHeight = parseInt($(db).css('height'))
      // var dbHeight = parseInt(db.clientHeight)
      db.style.transform = "scale(" + winWidth / 1920 + "," + winHeight / 1080 + ")"
    }

    // 观察器的配置（需要观察什么变动）
    const config = {
      attributes: false,
      childList: true,
      subtree: true,
    }

    // 当观察到变动时执行的回调函数
    const callback = function (mutationsList, observer) {
      let cTableTip
      // 选择需要观察变动的节点
      const domShow = document.getElementsByClassName("el-tooltip__popper")
      if (domShow && domShow.length > 0) {
        cTableTip = domShow[domShow.length - 1]
        if (cTableTip.style.top && cTableTip.style.display != "none") {
          let curTop = cTableTip.style.top
          let curLeft = cTableTip.style.left
          let indexHeight = curTop.indexOf("px")
          let topHeight = curTop.slice(0, indexHeight)
          let indexLeft = curLeft.indexOf("px")
          let leftWidth = curLeft.slice(0, indexLeft)
          setTimeout(() => {
            cTableTip.style.top = (topHeight * 1080) / winHeight + "px"
            cTableTip.style.left = (leftWidth * 1920) / winWidth + "px"
          })
        }
      }
      let pagination
      // 选择需要观察变动的节点
      const paginationShow = document.getElementsByClassName("paginationSelect")
      if (paginationShow && paginationShow.length > 0) {
        cTableTip = paginationShow[paginationShow.length - 1]
        if (cTableTip.style.top && cTableTip.style.display != "none") {
          let curTop = cTableTip.style.top
          let curLeft = cTableTip.style.left
          let indexHeight = curTop.indexOf("px")
          let topHeight = curTop.slice(0, indexHeight)
          let indexLeft = curLeft.indexOf("px")
          let leftWidth = curLeft.slice(0, indexLeft)
          setTimeout(() => {
            cTableTip.style.top = (topHeight * 1080) / winHeight + "px"
            cTableTip.style.left = (leftWidth * 1920) / winWidth + "px"
          })
        }
      }
    }
    // 创建一个观察器实例并传入回调函数
    const observer = new MutationObserver(callback)

    // 以上述配置开始观察目标节点
    observer.observe(document.body, config)

    // 之后，可停止观察
    // observer.disconnect();
  </script>
</html>
